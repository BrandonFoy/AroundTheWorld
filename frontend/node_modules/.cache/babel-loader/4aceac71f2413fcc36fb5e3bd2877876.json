{"ast":null,"code":"import API from \"../../API\";\nimport { addFavoritesAction, fetchFavoritesAction, deleteFavoritesAction } from \"./actions\";\nconst api = new API();\nconst FAVORITES_KEY = \"FAVORITES_KEY\";\nexport const fetchFromLocalStorage = () => {\n  return async dispatch => {\n    let favoritesJSON = localStorage.getItem(FAVORITES_KEY);\n    let favorites = [];\n\n    if (favoritesJSON) {\n      favorites = JSON.parse(favoritesJSON);\n    }\n\n    dispatch(fetchFavoritesAction(favorites));\n  };\n};\nexport const addFavorite = place => {\n  return async (dispatch, getState) => {\n    let prevFavorites = getState().favorites.list;\n    const nextFavorites = [place, ...prevFavorites];\n    setToLocalStorage(nextFavorites);\n    dispatch(addFavoritesAction(nextFavorites));\n  };\n};\nexport const deleteFavorite = id => {\n  return async (dispatch, getState) => {\n    let prevFavorites = getState().favorites.list;\n    const nextFavorites = prevFavorites.filter(image => image.id !== id);\n    setToLocalStorage(nextFavorites);\n    dispatch(deleteFavoritesAction(nextFavorites));\n  };\n};\nexport const setToLocalStorage = favorites => {\n  localStorage.setItem(FAVORITES_KEY, JSON.stringify(favorites));\n};","map":{"version":3,"sources":["C:/Users/Crash/OneDrive/Desktop/AroundTheWorld/frontend/src/reducks/favorites/operations.js"],"names":["API","addFavoritesAction","fetchFavoritesAction","deleteFavoritesAction","api","FAVORITES_KEY","fetchFromLocalStorage","dispatch","favoritesJSON","localStorage","getItem","favorites","JSON","parse","addFavorite","place","getState","prevFavorites","list","nextFavorites","setToLocalStorage","deleteFavorite","id","filter","image","setItem","stringify"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,WAAhB;AACA,SACEC,kBADF,EAEEC,oBAFF,EAGEC,qBAHF,QAIO,WAJP;AAKA,MAAMC,GAAG,GAAG,IAAIJ,GAAJ,EAAZ;AAEA,MAAMK,aAAa,GAAG,eAAtB;AACA,OAAO,MAAMC,qBAAqB,GAAG,MAAM;AACzC,SAAO,MAAOC,QAAP,IAAoB;AACzB,QAAIC,aAAa,GAAGC,YAAY,CAACC,OAAb,CAAqBL,aAArB,CAApB;AACA,QAAIM,SAAS,GAAG,EAAhB;;AACA,QAAIH,aAAJ,EAAmB;AACjBG,MAAAA,SAAS,GAAGC,IAAI,CAACC,KAAL,CAAWL,aAAX,CAAZ;AACD;;AACDD,IAAAA,QAAQ,CAACL,oBAAoB,CAACS,SAAD,CAArB,CAAR;AACD,GAPD;AAQD,CATM;AAUP,OAAO,MAAMG,WAAW,GAAIC,KAAD,IAAW;AACpC,SAAO,OAAOR,QAAP,EAAiBS,QAAjB,KAA8B;AACnC,QAAIC,aAAa,GAAGD,QAAQ,GAAGL,SAAX,CAAqBO,IAAzC;AACA,UAAMC,aAAa,GAAG,CAACJ,KAAD,EAAQ,GAAGE,aAAX,CAAtB;AACAG,IAAAA,iBAAiB,CAACD,aAAD,CAAjB;AACAZ,IAAAA,QAAQ,CAACN,kBAAkB,CAACkB,aAAD,CAAnB,CAAR;AACD,GALD;AAMD,CAPM;AAQP,OAAO,MAAME,cAAc,GAAIC,EAAD,IAAQ;AACpC,SAAO,OAAOf,QAAP,EAAiBS,QAAjB,KAA8B;AACnC,QAAIC,aAAa,GAAGD,QAAQ,GAAGL,SAAX,CAAqBO,IAAzC;AACA,UAAMC,aAAa,GAAGF,aAAa,CAACM,MAAd,CAAsBC,KAAD,IAAWA,KAAK,CAACF,EAAN,KAAaA,EAA7C,CAAtB;AACAF,IAAAA,iBAAiB,CAACD,aAAD,CAAjB;AACAZ,IAAAA,QAAQ,CAACJ,qBAAqB,CAACgB,aAAD,CAAtB,CAAR;AACD,GALD;AAMD,CAPM;AAQP,OAAO,MAAMC,iBAAiB,GAAIT,SAAD,IAAe;AAC9CF,EAAAA,YAAY,CAACgB,OAAb,CAAqBpB,aAArB,EAAoCO,IAAI,CAACc,SAAL,CAAef,SAAf,CAApC;AACD,CAFM","sourcesContent":["import API from \"../../API\";\r\nimport {\r\n  addFavoritesAction,\r\n  fetchFavoritesAction,\r\n  deleteFavoritesAction,\r\n} from \"./actions\";\r\nconst api = new API();\r\n\r\nconst FAVORITES_KEY = \"FAVORITES_KEY\";\r\nexport const fetchFromLocalStorage = () => {\r\n  return async (dispatch) => {\r\n    let favoritesJSON = localStorage.getItem(FAVORITES_KEY);\r\n    let favorites = [];\r\n    if (favoritesJSON) {\r\n      favorites = JSON.parse(favoritesJSON);\r\n    }\r\n    dispatch(fetchFavoritesAction(favorites));\r\n  };\r\n};\r\nexport const addFavorite = (place) => {\r\n  return async (dispatch, getState) => {\r\n    let prevFavorites = getState().favorites.list;\r\n    const nextFavorites = [place, ...prevFavorites];\r\n    setToLocalStorage(nextFavorites);\r\n    dispatch(addFavoritesAction(nextFavorites));\r\n  };\r\n};\r\nexport const deleteFavorite = (id) => {\r\n  return async (dispatch, getState) => {\r\n    let prevFavorites = getState().favorites.list;\r\n    const nextFavorites = prevFavorites.filter((image) => image.id !== id);\r\n    setToLocalStorage(nextFavorites);\r\n    dispatch(deleteFavoritesAction(nextFavorites));\r\n  };\r\n};\r\nexport const setToLocalStorage = (favorites) => {\r\n  localStorage.setItem(FAVORITES_KEY, JSON.stringify(favorites));\r\n};"]},"metadata":{},"sourceType":"module"}